<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Yomola Global Admin</title>
  <style>
    body { font-family: Arial; max-width: 400px; margin: auto; padding: 30px; }
    input, button { width: 100%; padding: 10px; margin: 6px 0; }
    button { cursor: pointer; }
    .hidden { display: none; }
    .error { color: red; }
  </style>
</head>
<body>

<h2 id="title">Admin Login</h2>

<!-- ADMIN LOGIN -->
<div id="login">
  <input id="email" type="email" placeholder="Email" />
  <input id="password" type="password" placeholder="Password" />
  <button onclick="login()">Login</button>
  <p id="error" class="error"></p>
</div>

<!-- ADMIN DASHBOARD -->
<div id="dashboard" class="hidden">
  <h3>Admin Dashboard</h3>
  <p id="role"></p>
  <button onclick="logout()">Logout</button>
</div>

<!-- FIREBASE -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  // ðŸ”¥ REPLACE WITH YOUR FIREBASE CONFIG
  const firebaseConfig = {
  apiKey: "AIzaSyCXm7IybpnE17zdXnbo7OdD32KSTXKqmSY",
  authDomain: "yomola-global-1f552.firebaseapp.com",
  projectId: "yomola-global-1f552",
  storageBucket: "yomola-global-1f552.firebasestorage.app",
  messagingSenderId: "884873998736",
  appId: "1:884873998736:web:b48cf603c4f55f91ee0315",
  measurementId: "G-LTJ10SLL4Y"
};

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  window.login = async () => {
    const email = emailInput.value;
    const password = passwordInput.value;

    try {
      const cred = await signInWithEmailAndPassword(auth, email, password);

      const ref = doc(db, "staff", cred.user.uid);
      const snap = await getDoc(ref);

      if (!snap.exists()) throw new Error("Not authorized");

      loginDiv.classList.add("hidden");
      dashboard.classList.remove("hidden");
      role.innerText = `Role: ${snap.data().role.toUpperCase()}`;
    } catch (e) {
      error.innerText = e.message;
    }
  };

  window.logout = async () => {
    await signOut(auth);
    location.reload();
  };

  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const loginDiv = document.getElementById("login");
  const dashboard = document.getElementById("dashboard");
  const error = document.getElementById("error");
  const role = document.getElementById("role");
</script>

</body>
</html>
